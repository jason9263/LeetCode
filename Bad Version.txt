// Forward declaration of isBadVersion API.
bool isBadVersion(int version);

class Solution {
public:
    int firstBadVersion(int n) {

        if(n <= 1){
            return n;
        }
        
        if(n == 2){
            if(isBadVersion(1)){
                return 1;
            }else{
                return 2;
            }
        } 
        
        long head = 1;
        long tail = n;

        
        long mid;
        
        while(head+1 < tail){
            mid = (head + tail)/2;
            if(isBadVersion(mid)){
                tail = mid;
            }else{
                head = mid;
            }
        }
        
      
            if(isBadVersion(head)){
                return head;
            }
            
            return tail;
        
        

        
    }
};